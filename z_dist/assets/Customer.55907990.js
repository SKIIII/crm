var D=Object.defineProperty,P=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var g=(t,a,e)=>a in t?D(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,h=(t,a)=>{for(var e in a||(a={}))N.call(a,e)&&g(t,e,a[e]);if(m)for(var e of m(a))V.call(a,e)&&g(t,e,a[e]);return t},f=(t,a)=>P(t,x(a));import{_ as j}from"./index.ce2553e5.js";import{u as B,a0 as E,r as F,o as T,b,t as A,d as i,a7 as M,e as C,n as v,w as s,_ as k,g as R,j as l,a9 as q,h as w,k as p}from"./vendor.fc966591.js";const G={name:"Customer",setup(){const t=B(),a=E(null),e=F({loading:!1,tableData:[],multipleSelection:[],total:0,currentPage:1,pageSize:10});T(()=>{n()});const n=()=>{e.loading=!0,b.get("/mgr/customers",{params:{action:"list_customer",page:e.currentPage,limit:e.pageSize}}).then(o=>{e.tableData=o.list,e.total=o.totalCount,e.currentPage=o.currentPage,e.loading=!1})},u=o=>{e.multipleSelection=o},_=o=>{e.currentPage=o,n()},c=()=>{t.push({path:"/add_customer"})},r=o=>{t.push({path:"/add_customer",query:{id:o}})},d=()=>{if(!e.multipleSelection.length){k.error("\u8BF7\u9009\u62E9\u9879");return}b.put("/mgr/customers",{action:"del_customer",ids:e.multipleSelection.map(o=>o.id)}).then(()=>{k.success("\u5220\u9664\u6210\u529F"),n()})};return f(h({},A(e)),{multipleTable:a,handleSelectionChange:u,getGuestList:n,changePage:_,handleAdd:c,handleEdit:r,handleDel:d})}},I={class:"header"},L=p("\u6DFB\u52A0\u5BA2\u6237"),H=p("\u5220\u9664\u8D26\u6237"),J=p("\u7F16\u8F91");function K(t,a,e,n,u,_){const c=i("el-button"),r=i("el-table-column"),d=i("el-table"),o=i("el-pagination"),y=i("el-card"),S=M("loading");return C(),v(y,{class:"guest-container"},{header:s(()=>[R("div",I,[l(c,{type:"primary",size:"small",icon:"el-icon-plus",onClick:n.handleAdd},{default:s(()=>[L]),_:1},8,["onClick"]),l(c,{type:"danger",size:"small",icon:"el-icon-delete",onClick:n.handleDel},{default:s(()=>[H]),_:1},8,["onClick"])])]),default:s(()=>[q((C(),v(d,{ref:"multipleTable",data:t.tableData,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:n.handleSelectionChange},{default:s(()=>[l(r,{type:"selection",width:"55"}),l(r,{prop:"name",label:"\u59D3\u540D"}),l(r,{prop:"phonenumber",label:"\u624B\u673A\u53F7"}),l(r,{prop:"address",label:"\u5730\u5740"}),w(` <el-table-column label="\u8EAB\u4EFD\u72B6\u6001">\r
				<template #default="scope">\r
					<span :style="scope.row.lockedFlag == 0 ? 'color: green;' : 'color: red;'">\r
						{{ scope.row.lockedFlag == 0 ? '\u6B63\u5E38' : '\u7981\u7528' }}\r
					</span>\r
				</template>\r
			</el-table-column>\r
			<el-table-column label="\u662F\u5426\u6CE8\u9500">\r
				<template #default="scope">\r
					<span :style="scope.row.lockedFlag == 0 ? 'color: green;' : 'color: red;'">\r
						{{ scope.row.isDeleted == 0 ? '\u6B63\u5E38' : '\u6CE8\u9500' }}\r
					</span>\r
				</template>\r
			</el-table-column> `),l(r,{prop:"create_time",label:"\u6CE8\u518C\u65F6\u95F4"}),l(r,{label:"\u64CD\u4F5C",width:"100"},{default:s(z=>[l(c,{size:"small",onClick:O=>n.handleEdit(z.row.id)},{default:s(()=>[J]),_:2},1032,["onClick"]),w(' <a style="cursor: pointer; margin-right: 10px" @confirm="handleEdit(scope.row)">\u7F16\u8F91</a> ')]),_:1})]),_:1},8,["data","onSelectionChange"])),[[S,t.loading]]),l(o,{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"current-page":t.currentPage,onCurrentChange:n.changePage},null,8,["total","page-size","current-page","onCurrentChange"])]),_:1})}var X=j(G,[["render",K],["__scopeId","data-v-699cf318"]]);export{X as default};
